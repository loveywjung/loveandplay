!function(){"use strict";if(window.TadSdk&&"object"==typeof window.TadSdk)return!1;window.tad_response=function(e,t){return e&&"number"==typeof e&&t&&"object"==typeof t?(r.Util.log("AD_RESPONSE : "+JSON.stringify(t)),r.Util.$("tad_"+e)&&document.getElementsByTagName("HEAD")[0].removeChild(r.Util.$("tad_"+e)),void TadSdk.AdView.onAdResponse(e,t)):(r.Util.error("ad response is wrong."),!1)},window.tad_policy_response=function(t,o){if(!t||"number"!=typeof t||!o||"object"!=typeof o)return r.Util.error("policy response is wrong."),!1;r.Util.log("POLICY_RESPONSE : "+JSON.stringify(o));var i=r.configure[t].m_client_id;if("0"==o.ret_code)r.Util.setCookieSec("TAD_POLICY_REVISION_"+i,-1,86400),e.setItem("tad_policy_"+i,""),e.setItem("tad_frequency_history_"+i,""),TadSdk.AdView.getAd(t);else if(o.hasOwnProperty("policy")){var n=o.policy.hasOwnProperty("revision")?o.policy.revision:0,a=o.policy.hasOwnProperty("interval")?o.policy.interval:0,d=o.policy.hasOwnProperty("options")?o.policy.options:{};r.Util.setCookieSec("TAD_POLICY_REVISION_"+i,n,a),e.setItem("tad_policy_"+i,JSON.stringify(o.policy)),e.setItem("tad_frequency_history_"+i,""),TadSdk.configure[t].policyRevision=n,TadSdk.AdView.onPolicyResponse(t,d)}},window.tad_adbay_response=function(e){if(!e||"object"!=typeof e)return r.Util.error("adbay ad response is wrong."),!1;var t={};if(e.cbp){var o=e.cbp,i=o.split("&");for(var n in i)t[i[n].split("=")[0]]=i[n].split("=")[1]}else t.adNo=2;return"executeAdbayMediaHouseAds"===e.cb?(r.configure[t.adNo].errorCallback(0),r.Util.error(r.responseErrorCode[0]),!1):(TadSdk.mediationResponse[t.adNo]=e,TadSdk.AdView.viewAd(t.adNo,e),void(r.Util.$("tad_adbay_"+t.adNo)&&document.getElementsByTagName("HEAD")[0].removeChild(r.Util.$("tad_adbay_"+t.adNo))))},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var o=t||0,i=this.length;o<i;o++)if(this[o]===e)return o;return-1}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),o=this,i=function(){},r=function(){return o.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r});var e="localStorage"in window&&null!==window.localStorage?window.localStorage:null,t=!0;try{e.setItem("__test","1"),e.removeItem("__test")}catch(o){t=!1,e={storage:{},getItem:function(t){return e[t]||null},setItem:function(t,o){e[t]=o},removeItem:function(t){delete e[t]},clear:function(){e={}}}}var i={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,r,n,a,d,s,l="",c=0;for(e=i._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),o=e.charCodeAt(c++),r=e.charCodeAt(c++),n=t>>2,a=(3&t)<<4|o>>4,d=(15&o)<<2|r>>6,s=63&r,isNaN(o)?d=s=64:isNaN(r)&&(s=64),l=l+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(d)+this._keyStr.charAt(s);return l},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}},r=window.TadSdk={m_sdk_ver:"3.13.0"};r.adRequestUrl="http://ad.adotsolution.com:15000/mweb/ad_request",r.adPolicyUrl="http://gw.adotsolution.com:14000/polmngr/getpolicy.json",r.adLogUrl="http://event.adotsolution.com:16000/logger",r.testUrl={adRequestUrl:"http://ad-dev.adotsolution.com:15000/mweb/ad_request",adPolicyUrl:"http://dcd-dev.adotsolution.com/polmngr/getpolicy.json",adLogUrl:"http://event-dev.adotsolution.com:16000/logger"},r.callback="tad_response",r.zIndex={inline:{zIndexOfAdhesion:5e3,zIndexOfExpanded:6e6},interstitial:{zIndex:6e6},floating:{zIndex:2e6,zIndexOfExpanded:6e6}},r.slot={1:{width:320,height:48,type:"inline"},2:{width:320,height:50,type:"inline"},3:{width:320,height:480,type:"interstitial"},5:{width:300,height:250,type:"inline"},6:{width:320,height:100,type:"inline"},103:{width:100,height:100,type:"floating"},104:{width:320,height:623,type:"inline"},105:{width:320,height:271,type:"inline"},303:{width:320,height:483,type:"inline"}},r.responseErrorCode={0:"No Ad.",1:"The DailyFrequency limit may have been reached.",101:"No Require Parameter.",300:"Unregistered Client ID.",301:"No Supported Device.",302:"Wrong Slot Number.",500:"Internal error."},r.commonParam=["m_sdk_ver","d_model","d_os_name","d_os_ver","d_locale","d_resolution","callback"],r.adRequestParam=["adNo","m_client_id","m_slot","m_sdk_ver","m_iframe","d_model","d_os_name","d_os_ver","d_locale","d_resolution","callback","u_age","u_gender","u_network_operator","c_uid","dummy"],r.adImpressionLogParam=["x_rid","k_event","x_products","x_tracking_url"],r.adCreativeQueryParam=["adNo","m_client_id","k_event","m_slot","m_sdk_ver","d_uid","x_bypass","d_model","d_os_name","d_os_ver","u_age","u_gender","u_network_operator","k_blank","x_products","x_redirect_url","x_tracking_url"],r.adClickLogParam=["x_rid","k_event","x_products","x_tracking_url","x_redirect_url"],r.adPolicyParam=["adNo","callback","m_client_id","m_slot","m_sdk_ver","d_uid"],r.ua=navigator.userAgent,r.isAndroid=r.ua.toLowerCase().indexOf("android")>0,r.isIphone=r.ua.toLowerCase().indexOf("iphone")>0,r.isIpad=r.ua.toLowerCase().indexOf("ipad")>0,r.isIpod=r.ua.toLowerCase().indexOf("ipod")>0,r.isIos=!!(r.isIphone||r.isIpad||r.isIpod),r.isWindowPhone=r.ua.toLowerCase().indexOf("windows phone")>0,r.isIe=r.ua.toLowerCase().indexOf("msie")>0,r.os=r.isIos?"iOS":r.isAndroid?"Android":r.isWindowPhone?"windowPhone":"etc",r.d_os_name="",r.d_os_ver="",r.d_model="",r.d_resolution="",r.configure={},r.adResponse={},r.mediationResponse={},r.activeFrame=[],r.adNo=[],r.isTest=!1,r.debugMode=!1,r.consoleMode=!1,r.consoleId=!1,r.addedListeners=[],r.AdView={init:function(e){var t=e.slotNo&&"number"==typeof e.slotNo?e.slotNo:"";t&&(r.Util.retrieveDeviceInfo(),this.setConfigure(t,e)&&this.getPolicy(t))},setConfigure:function(e,t){if(!t||"object"!=typeof t)return r.Util.error("sdk configure is wrong."),!1;if(r.adNo.indexOf(e)>-1)return r.Util.error("already ad is requested."),!1;if(!t.clientId||"string"!=typeof t.clientId)return r.Util.error("client id is wrong."),!1;if(!t.slotNo||"number"!=typeof t.slotNo)return r.Util.error("slot no is wrong."),!1;switch(r.isTest="boolean"==typeof t.test&&t.test===!0,r.isTest&&(r.adRequestUrl=r.testUrl.adRequestUrl,r.adLogUrl=r.testUrl.adLogUrl,r.adPolicyUrl=r.testUrl.adPolicyUrl),r.configure[e]={},r.configure[e].adNo=e,r.adNo.push(e),r.configure[e].m_client_id=t.clientId,r.configure[e].m_slot=t.slotNo,r.configure[e].m_iframe="boolean"==typeof t.useIframe&&t.useIframe===!0?"Y":"N",r.configure[e].adType=r.slot[e].type,r.configure[e].adhesionType=!(!t.adhesionType||"string"!=typeof t.adhesionType)&&t.adhesionType,"Y"==r.configure[e].m_iframe&&(r.configure[e].adhesionType=!1),r.configure[e].dummy=r.Util.getUnique(),r.configure[e].adType){case"inline":if(!r.configure[e].adhesionType||r.configure[e].adhesionType.indexOf("Copy")>0){if(!t.targetId||"string"!=typeof t.targetId)return r.Util.error("target element id is wrong."),!1;r.configure[e].target=t.targetId}else r.configure[e].target=!1;break;case"floating":r.configure[e].target=!1,r.configure[e].adhesionType=!1,r.configure[e].position=t.position&&"object"==typeof t.position?t.position:"";break;case"interstitial":r.configure[e].adhesionType=!1,r.configure[e].target=!1}if(r.configure[e].blank="boolean"==typeof t.newWindow&&t.newWindow===!0?"Y":"N",r.configure[e].k_blank=r.configure[e].blank,"iOS"==r.os&&r.Util.getDiffVer(r.d_os_ver)>=7e4&&(r.configure[e].blank="N"),r.configure[e].errorCallback=t.errorCallback&&"function"==typeof t.errorCallback?t.errorCallback:function(){},r.configure[e].actionCallback=t.actionCallback&&"function"==typeof t.actionCallback?t.actionCallback:function(){},r.configure[e].u_age=t.age||"number"==typeof t.age?t.age:"",r.configure[e].u_gender=t.gender||"number"==typeof t.gender?t.gender:"",r.configure[e].u_network_operator=t.carrier||"number"==typeof t.carrier?t.carrier:"",r.configure[e].isViewLog=!1,r.configure[e].status="loading",r.configure[e].debugMode=window.location.href.indexOf("debug=1")>-1,r.debugMode=r.configure[e].debugMode,r.debugMode){var o=r.Util.getUrlParam();r.Util.$(o.console)?(r.Util.$(o.console).innerHTML="",r.consoleMode=!0,r.consoleId=o.console):r.consoleMode=!1}r.configure[e].c_uid=r.Util.getCookie("TAD_DUID")&&"undefined"!=r.Util.getCookie("TAD_DUID")?r.Util.getCookie("TAD_DUID"):"",r.configure[e].c_uid=window.SyrupAdInterface?window.SyrupAdInterface.getDeviceId():r.configure[e].c_uid,r.configure[e].c_uid=t.deviceId&&"string"==typeof t.deviceId?t.deviceId:r.configure[e].c_uid;var i=r.zIndex[r.configure[e].adType];for(var n in i){if(t[n]&&"undefined"!=t[n])switch(typeof t[n]){case"string":r.configure[e][n]="off"==t[n]?"off":i[n];break;case"number":r.configure[e][n]=t[n]>0?t[n]:i[n];break;default:r.configure[e][n]=i[n]}else r.configure[e][n]=i[n];r.Util.log(r.configure[e].adType+" zIndex config : "+n+" : "+r.configure[e][n])}r.configure[e].userUrl=t.userUrl&&"object"==typeof t.userUrl?t.userUrl:{};var a=r.configure[e].userUrl;for(var d in a)a[d]&&r[d]&&(r[d]=a[d]);return!0},getPolicy:function(o){r.Util.log("[PolicyManager] localStorage 사용 여부 : "+t);var i=r.configure[o].m_client_id;if(t){var n=r.Util.getCookie("TAD_POLICY_REVISION_"+i)&&"undefined"!=r.Util.getCookie("TAD_POLICY_REVISION_"+i)?r.Util.getCookie("TAD_POLICY_REVISION_"+i):"";if(r.configure[o].policyRevision=n,r.Util.log("[PolicyManager] 저장된 revision : "+n),n&&n!=-1){r.Util.log("[PolicyManager] 저장된 policy : "+e.getItem("tad_policy_"+i));var a=e.getItem("tad_policy_"+i)?JSON.parse(e.getItem("tad_policy_"+i)):{option:""};this.onPolicyResponse(o,a.options)}else if(n&&n==-1)r.Util.log("[PolicyManager] no policy"),this.getAd(o);else{r.Util.log("[PolicyManager] ad policy 가져오기");var d=r.adPolicyUrl.indexOf("?")>0?r.adPolicyUrl+"&":r.adPolicyUrl+"?",s=r.Util.configToParam(r.configure[o],r.adPolicyParam);s=s.replace("tad_response","tad_policy_response");var l=document.createElement("SCRIPT");l.setAttribute("type","text/javascript"),l.setAttribute("id","tad_policy_"+o),l.setAttribute("src",d+s),document.getElementsByTagName("HEAD")[0].appendChild(l)}}else this.getAd(o)},onPolicyResponse:function(e,t){r.Util.log("[PolicyManager] onPolicyResponse : "+JSON.stringify(t));for(var o in t){r.Util.log("[PolicyManager] option : "+o);var i;switch(o){case"blacklist":if(r.configure[e].c_uid&&t[o].hasOwnProperty("duid")&&"object"==typeof t[o].duid&&t[o].duid.length>0){var n=t[o].duid;for(i in n)if(r.configure[e].c_uid==n[i])return r.configure[e].errorCallback(1),r.Util.error("INVALID_REQUEST"),r.Util.log("[PolicyManager] request is denied by blacklist.duid : "+n[i]),!1}if(t[o].hasOwnProperty("media")&&"object"==typeof t[o].media&&t[o].media.length>0){var a=t[o].media;for(i in a)if(window.location.hostname==a[i])return r.configure[e].errorCallback(1),r.Util.error("INVALID_REQUEST"),r.Util.log("[PolicyManager] request is denied by blacklist.media : "+a[i]),!1}break;case"reject":var d;if(t[o].hasOwnProperty("sdk")&&"object"==typeof t[o].sdk&&t[o].sdk.length>0||t[o].hasOwnProperty("sdk_from")&&t[o].sdk_from||t[o].hasOwnProperty("sdk_to")&&t[o].sdk_to){if(d=!1,t[o].hasOwnProperty("sdk")||"object"==typeof t[o].hasOwnProperty("sdk")){var s=t[o].sdk;for(i in s)r.m_sdk_ver==s[i]&&(d=!0)}var l,c,u=r.Util.getDiffVer(r.m_sdk_ver);t[o].hasOwnProperty("sdk_from")&&t[o].sdk_from&&t[o].hasOwnProperty("sdk_to")&&t[o].sdk_to?(l=r.Util.getDiffVer(t[o].sdk_from),c=r.Util.getDiffVer(t[o].sdk_to),u>=l&&u<=c&&(d=!0)):t[o].hasOwnProperty("sdk_from")&&t[o].sdk_from?(l=r.Util.getDiffVer(t[o].sdk_from),u>=l&&(d=!0)):t[o].hasOwnProperty("sdk_to")&&t[o].sdk_to&&(c=r.Util.getDiffVer(t[o].sdk_to),u<=c&&(d=!0))}else d=!0;if(r.Util.log("[PolicyManager] reject SDK 버전 포함 여부 : "+d),d&&!this.checkFrequency(e,t[o],"req"))return!1;break;case"frequency_req":if(!this.checkFrequency(e,t[o],"req"))return!1;break;case"frequency_imp":if(!this.checkFrequency(e,t[o],"imp"))return!1}}r.Util.log("[PolicyManager] 광고요청"),this.getAd(e)},checkFrequency:function(t,o,i){var n=r.configure[t].m_client_id,a=e.getItem("tad_frequency_history_"+n)?JSON.parse(e.getItem("tad_frequency_history_"+n)):{};if(a.hasOwnProperty(i)&&a[i].length>0){var d,s,l=a.hasOwnProperty(i)?a[i]:{};if(l.length>99&&(a[i]=l.slice(l.length-99,l.length),e.setItem("tad_frequency_history_"+n,JSON.stringify(a)),l=a[i]),o.hasOwnProperty("daily")&&"number"==typeof o.daily&&o.daily!=-1){var c=new Date,u=new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime(),f=0;for(d=0,s=l.length;d<s;d++)l[d]>=u&&(f+=1);if(f>=o.daily)return r.configure[t].errorCallback(1),r.Util.log(i+". daily 설정이 over하였습니다."),r.Util.error("Frequency over."),!1}if(o.hasOwnProperty("period")&&"number"==typeof o.period&&o.period!=-1&&o.hasOwnProperty("limit")&&"number"==typeof o.limit&&o.limit!=-1){var g=(new Date).getTime()-1e3*o.period,p=0;for(d=0,s=l.length;d<s;d++)l[d]>=g&&(p+=1);if(p>=o.limit)return r.configure[t].errorCallback(1),r.Util.log(i+". period limit 설정이 over하였습니다."),r.Util.error("Frequency over."),!1}}if(o.hasOwnProperty("weight")&&"number"==typeof o.weight&&o.weight!=-1){var h=Math.round(100*Math.random());if(r.Util.log("[PolicyManager] 설정 weight : "+o.weight+" : random chance : "+h),h>=o.weight)return r.configure[t].errorCallback(1),r.Util.log(i+". weight limit 설정이 over하였습니다."),r.Util.error("Frequency over."),!1}return!0},getAd:function(e){var t=r.adRequestUrl.indexOf("?")>0?r.adRequestUrl+"&":r.adRequestUrl+"?",o=r.Util.configToParam(r.configure[e],r.adRequestParam);o=o.replace("&c_uid=","&d_uid=");var i=document.createElement("SCRIPT");i.setAttribute("type","text/javascript"),i.setAttribute("id","tad_"+e),i.setAttribute("src",t+o),document.getElementsByTagName("HEAD")[0].appendChild(i),r.configure[e].isViewLog=!1,r.configure[e].policyRevision&&r.configure[e].policyRevision!=-1&&this.saveFrequencyHistory("req",e)},onAdResponse:function(e,t){if(r.Util.setCookie("TAD_DUID",t.d_uid,365),t.hasOwnProperty("m_policy")){var o=t.m_policy;if(o&&""!==o){var n=r.configure[e].policyRevision?r.configure[e].policyRevision:-1;if(n!=o){r.Util.log("[PolicyManager] revision이 갱신되어 삭제");var a=r.configure[e].m_client_id;r.Util.setCookie("TAD_POLICY_REVISION_"+a,-1,-1)}}}for(var d in r.responseErrorCode)if(t.ret_code==d)return r.configure[e].errorCallback(t.ret_code),r.Util.error(r.responseErrorCode[d]),!1;if(!t.d_uid)return r.Util.error(r.responseErrorCode[0]),!1;r.adResponse[e]=t;var s,l,c,u,f=r.adResponse[e].c_url,g=f.indexOf("://")>-1?f.split("://")[0]:"http";switch(g){case"adbay_n":switch(r.configure[e].m_slot){case 2:s="http://adapi.about.co.kr/mad/jsonp/skplad/article01/top_middle?",l="host=http://www.adotsolution.com&uis=sb,bn&limit=1";break;case 103:s="http://adapi.about.co.kr/mad/jsonp/skplad/board01/bottom_left?",l="host=http://www.adotsolution.com&uis=sb&limit=1";break;default:s="http://adapi.about.co.kr/mad/jsonp/skplad/article01/top_middle?",l="host=http://www.adotsolution.com&uis=sb,bn&limit=1"}c=i.encode(l)+"&callback=tad_adbay_response&cbp="+encodeURIComponent("adNo="+e),u=document.createElement("SCRIPT"),u.setAttribute("type","text/javascript"),u.setAttribute("id","tad_adbay_"+e),u.setAttribute("src",s+c),document.getElementsByTagName("HEAD")[0].appendChild(u),r.adResponse[e].c_url=f.replace("adbay_n://","http://");break;case"adbay_r":switch(r.configure[e].m_slot){case 2:s="http://adapi.about.co.kr/mad/jsonp/skplad/article02/top_middle?",l="host=http://www.adotsolution.com&uis=bn&limit=1";break;case 103:s="http://adapi.about.co.kr/mad/jsonp/skplad/board01/bottom_left?",l="host=http://www.adotsolution.com&uis=sb&limit=1";break;default:s="http://adapi.about.co.kr/mad/jsonp/skplad/article02/top_middle?",l="host=http://www.adotsolution.com&uis=bn&limit=1"}c=i.encode(l)+"&callback=tad_adbay_response&cbp="+encodeURIComponent("adNo="+e),u=document.createElement("SCRIPT"),u.setAttribute("type","text/javascript"),u.setAttribute("id","tad_adbay_"+e),u.setAttribute("src",s+c),document.getElementsByTagName("HEAD")[0].appendChild(u),r.adResponse[e].c_url=f.replace("adbay_r://","http://");break;case"http":case"https":r.AdView.viewAd(e,t)}},viewAd:function(e,t){var o,i,n,a,d,s=r.Util.mergeObject(t,r.configure[e]),l=r.Util.configToParam(s,r.adCreativeQueryParam),c=r.adResponse[e].c_url;r.Util.log(c),c+=c.indexOf("?")>-1?"&":"?",c+=l;var u=r.slot[r.configure[e].m_slot];switch("inline"!=r.configure[e].adType||r.isAndroid&&r.ua.indexOf("2.3")>-1||(u.width="100%"),r.configure[e].adType){case"inline":var f;if(r.configure[e].adhesionType){var g=document.getElementsByTagName("BODY")[0];if(a={position:"fixed",left:0,bottom:0},"off"!=r.configure[e].zIndexOfAdhesion&&(a.zIndex=r.configure[e].zIndexOfAdhesion),o=this.createWrap(e,"adhesion",0,u.height,a),this.setBackground(o,this.getBackground(e)),n=c.replace("adNo="+e,"adNo="+e+"A"),i=this.createAd(e,n,"adhesion",u),!i)return!1;if(o.appendChild(i),this.sendImpressionLog(e),g.appendChild(o),this.addScrollEvent(e,r.configure[e].adhesionType),r.configure[e].adhesionType.indexOf("Copy")>0){f=r.Util.$(r.configure[e].target),this.setBackground(f,this.getBackground(e));var p=c.replace("adNo="+e,"adNo="+e+"T"),h=this.createAd(e,p,"default",u,"");if(!h)return!1;f.appendChild(h)}}else f=r.Util.$(r.configure[e].target),r.configure[e].status="loaded",r.configure[e].c_url=c,this.addScrollEvent(e,"lazyView");break;case"floating":var m=document.getElementsByTagName("BODY")[0];if(d=this.getPosition(r.configure[e].position),a={position:"fixed",width:u.width+"px",height:u.height+"px"},"off"!=r.configure[e].zIndex&&(a.zIndex=r.configure[e].zIndex),a[d.hAxis]=d.offsetX+"px",a[d.vAxis]=d.offsetY+"px",o=this.createWrap(e,"floating",u.width,u.height,a),n=c.replace("adNo="+e,"adNo="+e+"F"),i=this.createAd(e,n,"floating",u),!i)return!1;o.appendChild(i),this.sendImpressionLog(e),m.appendChild(o);break;case"interstitial":var y=document.getElementsByTagName("BODY")[0];d=this.getPosition(r.configure[e].position);var _=r.Util.getDocHeight();if(_=_>u.height?_:u.height,a={position:"absolute",width:"100%",height:_+"px",left:"0px",top:"0px","background-color":"rgba(0, 0, 0, 0.7)"},"off"!=r.configure[e].zIndex&&(a.zIndex=r.configure[e].zIndex),o=this.createWrap(e,"interstitial",u.width,u.height,a),n=c.replace("adNo="+e,"adNo="+e+"I"),i=this.createAd(e,n,"interstitial",u),!i)return!1;o.appendChild(i),this.sendImpressionLog(e),y.appendChild(o),o.appendChild(this.createCloseButton(e,"interstitial")),window.scrollTo(0,1)}(r.configure[e].adhesionType||"inline"!=r.configure[e].adType)&&(r.configure[e].status="default",this.addClickEvent(e),this.addPageShowHideEvent())},createAd:function(e,t,o,i,n){if(!t||"string"!=typeof t)return r.Util.error("creative url is wrong."),!1;if(!i||"object"!=typeof i||"undefined"==i.width||"undefined"==i.height)return r.Util.error("ad slot size is wrong."),!1;var a=o&&"string"==typeof o?o:"default",d=document.createElement("IFRAME");if(d.setAttribute("id",a+"Ad_"+e),d.setAttribute("src",t),d.setAttribute("width",i.width),d.setAttribute("height",i.height),d.setAttribute("frameBorder",0),r.Util.addEvent(d,"load",function(e){if(r.ua.toLowerCase().indexOf("chrome")>-1){var o=r.Util.getUnique();this.src=t+"#reload"+o}}),"floating"==a&&d.setAttribute("ALLOWTRANSPARENCY",!0),d.style.display="block",d.style.margin="0 auto","interstitial"==a){var s=r.Util.getWindowSize(),l=Math.round((s.height-i.height)/2);l=l<0?0:l,d.style.marginTop=l+"px"}return r.activeFrame.push(d),d},createWrap:function(e,t,o,i,r){var n=document.createElement("DIV");if(n.setAttribute("id",t+"Wrap_"+e),n.style.width=0===o?"100%":o+"px",n.style.height=i+"px",r&&"object"==typeof r)for(var a in r)n.style[a]=r[a];return n},createCloseButton:function(e,t){var o=document.createElement("DIV"),i={position:"absolute",width:"50px",height:"50px",right:"0px",top:"0px"};o.setAttribute("id","adCloseBtn_"+e);for(var n in i)o.style[n]=i[n];var a=document.createElement("IMG");return a.setAttribute("src","http://adddn.adotsolution.com/contents/sdk/img/tad_close.png"),a.setAttribute("width",50),a.setAttribute("height",50),a.setAttribute("alt","close"),o.appendChild(a),r.Util.addEvent(o,"click",r.Effect.close.bind(this,e,t)),o},getBackground:function(e){return!(!e&&"number"!=e)&&r.adResponse[e].c_data.backfill_color},setBackground:function(e,t){t&&(e.style.background=t)},getPosition:function(e){if(!e&&"object"!=typeof e)return!1;var t=e.baseline&&"string"==typeof e.baseline?e.baseline.split("-"):"",o="object"==typeof t&&"right"==t[0]?"right":"left",i="object"==typeof t&&"bottom"==t[1]?"bottom":"top",r=e.offsetX&&"number"==typeof e.offsetX?e.offsetX:0,n=e.offsetY&&"number"==typeof e.offsetY?e.offsetY:0;return{hAxis:o,vAxis:i,offsetX:r,offsetY:n}},sendImpressionLog:function(e){if(r.configure[e].isViewLog)return!1;var t={k_event:0};r.adResponse[e].x_imp_tracking_url&&(t.x_tracking_url=r.adResponse[e].x_imp_tracking_url);var o=r.Util.mergeObject(r.adResponse[e],t),i=r.Util.configToParam(o,r.adImpressionLogParam),n=r.adLogUrl.indexOf("?")>-1?r.adLogUrl+"&":r.adLogUrl+"?";n+=i,this.sendLog(n),r.configure[e].isViewLog=!0,r.configure[e].policyRevision&&r.configure[e].policyRevision!=-1&&this.saveFrequencyHistory("imp",e)},sendEventLog:function(e,t){t||(t=1);var o={k_event:t},i=r.Util.mergeObject(r.adResponse[e],o),n=r.Util.configToParam(i,r.adClickLogParam),a=r.adLogUrl.indexOf("?")>-1?r.adLogUrl+"&":r.adLogUrl+"?";a+=n,this.sendLogIfrm(a),r.Util.log("clickLog : "+a)},addClickEvent:function(e){r.Util.addEvent(window,"message",this.onMessage.bind(this))},addScrollEvent:function(e,t){switch(t){case"scrollTop":case"scrollTopCopy":r.Util.addEvent(window,"touchmove",function(){r.AdView.onScrollTop(e)}),r.Util.addEvent(window,"scroll",function(){r.AdView.onScrollTop(e)}),r.AdView.onScrollTop(e);break;case"alwaysCopy":r.Util.addEvent(window,"touchmove",function(){r.AdView.onScrollAlways(e)}),r.Util.addEvent(window,"scroll",function(){r.AdView.onScrollAlways(e)}),r.AdView.onScrollAlways(e);break;case"lazyView":r.Util.addEvent(window,"touchmove",function(){r.AdView.onScrollView(e)}),r.Util.addEvent(window,"scroll",function(){r.AdView.onScrollView(e)}),r.AdView.onScrollView(e)}},addPageShowHideEvent:function(){(r.isIos||r.isAndroid)&&(r.Util.addEvent(window,"pageshow",function(e){if(e.persisted)for(var t=0,o=r.activeFrame.length;t<o;t++)r.activeFrame[t].setAttribute("src",r.activeFrame[t].src)}),r.Util.addEvent(window,"pagehide",function(e){if(e.persisted)for(var t=0,o=r.adNo.length;t<o;t++)r.Effect.allClose(r.adNo[t])}))},onScrollTop:function(e){var t=r.Util.$("adhesionWrap_"+e)||"";return!(!t||"default"!=r.configure[e].status&&"loading"!=r.configure[e].status)&&void(window.scrollY>1?t.style.display="none":t.style.display="block")},onScrollAlways:function(e){var t=r.Util.$("adhesionWrap_"+e)||"";if(!t||"default"!=r.configure[e].status&&"loading"!=r.configure[e].status)return!1;var o=r.Util.getWindowSize(),i=r.Util.getScrollY()+o.height-r.slot[r.configure[e].m_slot].height,n=r.Util.getTargetScrollY(r.configure[e].target);i>n?t.style.display="none":t.style.display="block"},onScrollView:function(e){if("loaded"!=r.configure[e].status)return!1;var t=r.Util.$(r.configure[e].target),o=r.slot[r.configure[e].m_slot],i=r.configure[e].c_url,n=r.Util.getWindowSize(),a=r.Util.getScrollY()+n.height,d=r.Util.getTargetScrollY(t);a>=d&&(r.Util.log("Slot "+e+" onScrollView : 실노출"),r.AdView.setBackground(t,r.AdView.getBackground(e)),setTimeout(function(){t.appendChild(r.AdView.createAd(e,i,"default",o))},100),r.AdView.sendImpressionLog(e),r.configure[e].status="default",r.AdView.addClickEvent(e),r.AdView.addPageShowHideEvent())},onMessage:function(e){if(!e||"object"!=typeof e)return r.Util.error("onMessage Param Error."),!1;var t=r.isIE&&window.JSON?JSON.parse(e.data.owner):e.data.owner;if("syrupad"!=t)return r.Util.log("onMessage : "+e.origin),!1;var o=r.isIe&&window.JSON?JSON.parse(e.data).adNo:e.data.adNo,i=o.indexOf("A")>0?"adhesion":o.indexOf("F")>-1?"floating":"target";o="string"==typeof o?parseInt(o):o;var n=r.isIe&&window.JSON?JSON.parse(e.data).type:e.data.type;if("event"==n);else{var a,d=r.isIe&&window.JSON?JSON.parse(e.data):e.data,s=d.hasOwnProperty("trigger"),l=s?d.trigger:d.action.trigger,c=d.hasOwnProperty("url")?d.url:"",u=(d.hasOwnProperty("height")?d.height:0,d.hasOwnProperty("width")?d.width:0,s?d.eventCode:0);switch(r.Util.log("Slot : "+o+" : "+l+" - "+u),l){case"open":a=s?{url:d.url}:d.action,r.Effect.open(o,a,u);break;case"close":r.Effect.close(o,i);break;case"event":s&&this.sendEventLog(o,u);break;case"onload":var f;f="inline"==r.configure[o].adType?r.Util.$(r.configure[o].target).getElementsByTagName("IFRAME")[0]:r.Util.$(r.configure[o].adType+"Wrap_"+o).getElementsByTagName("IFRAME")[0],f.contentWindow.postMessage(r.mediationResponse[o],"*");break;case"openWithProduct":a=s?{url:d.url,x_products:d.x_products}:d.action,r.Effect.open(o,a,u);break;case"download":if(a={},c="",c="iOS"==r.os?d.download.itunes?d.download.itunes:d.download.alternative:d.download.market?d.download.market:d.download.alternative,!c)return!1;a.url=c,r.Effect.open(o,a,u)}}},sendLog:function(e){if(!e||"string"!=typeof e)return!1;r.Util.log("sendLog : "+e);var t=new Image;t.src=e},sendLogIfrm:function(e){if(!e||"string"!=typeof e)return!1;r.Util.log("sendLogIfrm : "+e);var t=document.createElement("IFRAME");t.setAttribute("src",e),t.style.visibility="hidden",t.onload=function(){setTimeout(function(){document.getElementsByTagName("BODY")[0].removeChild(t)},500)},document.getElementsByTagName("BODY")[0].appendChild(t)},saveFrequencyHistory:function(t,o){if(!t||"string"!=typeof t)return!1;var i=r.configure[o].m_client_id,n=e.getItem("tad_frequency_history_"+i)?JSON.parse(e.getItem("tad_frequency_history_"+i)):{};n.hasOwnProperty(t)||(n[t]=[]);var a=(new Date).getTime();n[t].push(a),r.Util.log(t+" Frequency history 저장 : "+a),r.Util.log("저장된 Frequency history : "+JSON.stringify(n)),e.setItem("tad_frequency_history_"+i,JSON.stringify(n))}},r.Util={$:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,o){return(e!=window||"scroll"==t||!r.addedListeners[t])&&(window.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o,!1),void(e==window&&(r.addedListeners[t]=o)))},openToBlank:function(e){var t=document.createElement("A");t.setAttribute("href",e),t.setAttribute("target","_blank");var o;document.createEventObject?(o=document.createEventObject(),t.fireEvent("onclick",o)):(o=document.createEvent("HTMLEvents"),o.initEvent("click",!0,!0),t.dispatchEvent(o))},getUnique:function(){return(new Date).getTime()+Math.round(1234567890*Math.random())+"S5"},retrieveDeviceInfo:function(){var e=r.Util.getWindowSize(),t=window.devicePixelRatio?window.devicePixelRatio:1,o=e.width?Math.round(e.width*t):0,i=e.height?Math.round(e.height*t):0;r.d_resolution=o+"x"+i+"x"+t;var n;switch(r.os){case"Android":n=r.ua.match(/android (\d+(?:\.\d+){1,2})/i),r.d_os_ver=n[1],r.ua.indexOf("Build")>-1&&(r.d_model=r.ua.match(/([\w\-]+)\sbuild/i)[1]),r.d_os_name="1";break;case"iOS":n=r.ua.match(/os (\d+)_(\d+)_?(\d+)?/i),r.d_os_ver=n[1]+"."+n[2]+"."+parseInt(n[3]||0,10),r.d_model=r.ua.match(/\(+([\w]+)\;/i)[1],r.d_os_name="2";break;case"windowPhone":r.d_os_name="3";break;default:r.d_os_name="0"}},configToParam:function(e,t){var o="",i="",n="",a="";for(n in t){if(a=t[n],"string"!=typeof a)break;r.commonParam.indexOf(a)>-1?(i=null===r[a]?"":r[a],o+=a+"="+encodeURIComponent(i)+"&"):(i=null===e[a]||void 0===e[a]?"":e[a],o+=a+"="+encodeURIComponent(i)+"&")}return o.length>0?o.slice(0,o.length-1):o},mergeObject:function(e,t){e&&"object"==typeof e&&t&&"object"==typeof t||this.error("mergeObject Method - incorrect param.");var o={},i="";for(i in e)o[i]=e[i];for(i in t)o[i]=t[i];return o},error:function(e){var t="T-Ad SDK : ";r.isTest===!0?alert(t+e):console.log(t+e)},getWindowSize:function(){return{width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}},getDocHeight:function(){var e=window.document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)},getScrollY:function(){var e=0;return"number"==typeof window.pageYOffset?e=window.pageYOffset:document.body&&document.body.scrollTop?e=document.body.scrollTop:(document.documentElement||document.documentElement.scrollTop)&&(e=document.documentElement.scrollTop),e},getTargetScrollY:function(e){for(var t=this.$(e),o=t.offsetTop;t==t.offsetParent;)o+=t.offsetTop;return o},getUrlParam:function(){var e=window.location.href,t=e.indexOf("?")>-1?e.split("?")[1]:"";if(""!==t){for(var o=t.indexOf("&")>-1?t.split("&"):[t],i={},r=0,n=o.length;r<n;r++){var a=o[r].split("=");a[0],a[1];i[a[0]]=a[1]}return i}},getDiffVer:function(e){if(!e||"string"!=typeof e)return!1;if(e.indexOf(".")<0)return!1;for(var t=e.split("."),o=0,i=1e4,r=0,n=t.length;r<n;r++)o+=t[r]*i,i/=100;return o},getCookie:function(e){var t,o,i,r;if(t=";"+document.cookie.replace(/ /g,"")+";",o=";"+e+"=",i=t.indexOf(o),i!=-1)return i+=o.length,r=t.indexOf(";",i),unescape(t.substr(i,r-i))},setCookie:function(e,t,o){var i=new Date,r="";o&&(i.setDate(i.getDate()+o),r="expires="+i.toGMTString()+";"),document.cookie=e+"="+escape(t)+"; path=/;"+r},setCookieOneday:function(e,t){var o=new Date,i="";o.setHours(23),o.setMinutes(59),o.setSeconds(59),i="expires="+o.toGMTString()+";",document.cookie=e+"="+escape(t)+"; path=/;"+i},setCookieSec:function(e,t,o){var i=new Date,r="";o&&(i.setTime(i.getTime()+1e3*o),r="expires="+i.toGMTString()+";"),document.cookie=e+"="+escape(t)+"; path=/;"+r},log:function(e){if(r.debugMode){var t="T-Ad Log : ";r.consoleMode?r.Util.$(r.consoleId).innerHTML+=t+e+"<br />":console.log(t+e)}},param2Object:function(e){if("undefined"==e||"string"!=typeof e)return{};var t="",o={},i=e.split("&");for(t in i)i[t].indexOf("=")>-1&&(o[i[t].split("=")[0]]=i[t].split("=")[1]);return o},inArray:function(e,t){if(t){for(var o=0;o<t.length;o++)if(e==t[o])return!0;return!1}return!1}},r.Effect={open:function(e,t,o){var i={k_event:o,x_redirect_url:t.url};t.hasOwnProperty("x_products")&&(i.x_products=t.x_products);var n=r.Util.mergeObject(r.adResponse[e],i);r.adResponse[e].x_clk_tracking_url&&(n.x_tracking_url=r.adResponse[e].x_clk_tracking_url);var a=r.Util.configToParam(n,r.adClickLogParam),d=r.adLogUrl.indexOf("?")>-1?r.adLogUrl+"&":r.adLogUrl+"?";d+=a,"N"==r.configure[e].blank?top!==self?window.top.location=d:window.location=d:r.Util.openToBlank(d)},close:function(e,t){if("floating"==t||"interstitial"==t){var o,i,n;"floating"==t?(o=800,i=r.Util.$("floatingWrap_"+e)):(o=100,i=r.Util.$("interstitialWrap_"+e)),n=i.getElementsByTagName("IFRAME")[0],i.removeChild(n),r.configure[e].status="closed",r.configure[e].actionCallback(1),setTimeout(function(){var e=document.getElementsByTagName("BODY")[0];e.removeChild(i)},o)}}},r.destroy=function(e){var t,o;for(t in r.configure)if(r.configure[t].m_client_id==e.clientId&&r.configure[t].m_slot==e.slotNo&&"default"==r.configure[t].status&&"floating"==r.configure[t].adType){o=document.getElementById("floatingWrap_"+t),o&&(document.getElementsByTagName("BODY")[0].removeChild(o),r.configure[t].status="destroyed");break}},window.tad_conf&&window.setTimeout(function(){TadSdk.AdView.init(tad_conf)},10)}();